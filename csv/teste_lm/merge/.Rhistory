load("C:/Users/LSCAD/Desktop/TestesKym/analise_dados/analise_dados.Rproj")
load("C:/Users/LSCAD/Desktop/TestesKym/analise_dados/levantamento.R")
load("C:/Users/LSCAD/Desktop/TestesKym/analise_dados/ufv-ufms2/codigos/f1.R")
# dados produÃ§Ã£o IrecÃª
f <- function(x){
if(!is.na(stringr::str_extract(x, "aurora_vision"))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = ".csv")
files <- files[!stringr::str_detect(files, "planta")]
d <- do.call("rbind", lapply(files, function(x) read.csv(x, stringsAsFactors = FALSE, header = FALSE, skip = 9, na.strings = "n/a")))
return(d)
}
return()
}
install.packages("stringr")
dirs <- list.dirs("../../../monitoramento-irece/Arquivos", full.names = TRUE, recursive = TRUE)
require(stringr)
f1 <- function(x){
if(!is.na(str_extract(x, regex.inversor.path))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = regex.inversor.file)
d <- do.call("rbind", lapply(files, function(x) read.csv(x, stringsAsFactors = FALSE, header = FALSE, skip = 2, na.strings = "n/a")))
return(d)
}
return()
}
f2 <- function(x){
if(!is.na(str_extract(x, regex.estacao.path))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = regex(".csv$"))
files <- files[str_sub(files, -10, -5) >= strftime(filter_data, "%y%m%d")]
d <- do.call("rbind", lapply(files, f3))
return(d)
}
return()
}
pathrepo <- "C:\Users\LSCAD\Desktop\TestesKym\MonitoramentoUFMS"
regex.inversor.path <- regex("InversorFronius")
regex.inversor.path <- regex("InversorFronius")
regex.inversor.file <- regex(".*RelatÃ³rio_diÃ¡rio_.*.csv")
f2 <- function(x){
if(!is.na(str_extract(x, regex.estacao.path))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = regex(".csv$"))
files <- files[str_sub(files, -10, -5) >= strftime(filter_data, "%y%m%d")]
d <- do.call("rbind", lapply(files, f3))
return(d)
}
return()
}
files <- files[str_sub(files, -10, -5) >= strftime(filter_data, "%y%m%d")]
#pathrepo <- "/home/kymberlim/Documentos/ProjetoSolar/repositorio/monitoramento-ufms"
pathrepo <- "/home/LSCAD/Desktop/TestesKym/MonitoramentoUFMS"
regex.inversor.path <- regex("InversorFronius")
regex.inversor.file <- regex(".*RelatÃ³rio_diÃ¡rio_.*.csv")
getwd()
#pathrepo <- "/home/kymberlim/Documentos/ProjetoSolar/repositorio/monitoramento-ufms"
pathrepo <- "C:/Users/LSCAD/Desktop/TestesKym"
regex.inversor.path <- regex("InversorFronius")
regex.inversor.file <- regex(".*RelatÃ³rio_diÃ¡rio_.*.csv")
columns.inversor <- c("timestamp","I_CA", "I_CC", "V_CA", "V_CC", "E_CA")
regex.estacao.path <- regex("WeatherHawk$")
columns.estacao <- c("timestamp","dir_vento", "vel_vento", "raj_vento", "umidade", "temp_in", "temp", "raw_barom", "chuva_tot", "rad_sol", "p_orvalho", "barom_sl", "rad_sol_avg", "vel_vento_max", "raj_vento_max", "umidade_max", "temp_in_max", "temp_max", "raw_barom_max", "chuva_tot_max", "rad_sol_max", "barom_sl_max", "vel_vento_min", "raj_vento_min", "umidade_min", "temp_in_min", "temp_min", "raw_barom_min", "chuva_tot_min", "rad_sol_min", "barom_sl_min", "moon_phase", "data")
columns.estacao.tonumeric <- c("dir_vento", "vel_vento", "raj_vento", "umidade", "temp_in", "temp", "raw_barom", "chuva_tot", "rad_sol", "p_orvalho", "barom_sl", "rad_sol_avg", "vel_vento_max", "raj_vento_max", "umidade_max", "temp_in_max", "temp_max", "raw_barom_max", "chuva_tot_max", "rad_sol_max", "barom_sl_max", "vel_vento_min", "raj_vento_min", "umidade_min", "temp_in_min", "temp_min", "raw_barom_min", "chuva_tot_min", "rad_sol_min", "barom_sl_min", "moon_phase")
filter_data <- strptime("10/11/2018", format = "%d/%m/%Y")
f1 <- function(x){
if(!is.na(str_extract(x, regex.inversor.path))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = regex.inversor.file)
d <- do.call("rbind", lapply(files, function(x) read.csv(x, stringsAsFactors = FALSE, header = FALSE, skip = 2, na.strings = "n/a")))
return(d)
}
return()
}
f2 <- function(x){
if(!is.na(str_extract(x, regex.estacao.path))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = regex(".csv$"))
files <- files[str_sub(files, -10, -5) >= strftime(filter_data, "%y%m%d")]
d <- do.call("rbind", lapply(files, f3))
return(d)
}
return()
}
f3 <- function(x){
d <- read.csv(x, stringsAsFactors = FALSE, header = FALSE, skip = 3, na.strings = "n/a")
d$data = str_sub(x, -10, -5)
return(d)
}
View(filter_data)
View(filter_data)
#pathrepo <- "/home/kymberlim/Documentos/ProjetoSolar/repositorio/monitoramento-ufms"
pathrepo <- "/home/Users/LSCAD/Desktop/TestesKym"
regex.inversor.path <- regex("InversorFronius")
regex.inversor.file <- regex(".*RelatÃ³rio_diÃ¡rio_.*.csv")
columns.inversor <- c("timestamp","I_CA", "I_CC", "V_CA", "V_CC", "E_CA")
regex.estacao.path <- regex("WeatherHawk$")
columns.estacao <- c("timestamp","dir_vento", "vel_vento", "raj_vento", "umidade", "temp_in", "temp", "raw_barom", "chuva_tot", "rad_sol", "p_orvalho", "barom_sl", "rad_sol_avg", "vel_vento_max", "raj_vento_max", "umidade_max", "temp_in_max", "temp_max", "raw_barom_max", "chuva_tot_max", "rad_sol_max", "barom_sl_max", "vel_vento_min", "raj_vento_min", "umidade_min", "temp_in_min", "temp_min", "raw_barom_min", "chuva_tot_min", "rad_sol_min", "barom_sl_min", "moon_phase", "data")
columns.estacao.tonumeric <- c("dir_vento", "vel_vento", "raj_vento", "umidade", "temp_in", "temp", "raw_barom", "chuva_tot", "rad_sol", "p_orvalho", "barom_sl", "rad_sol_avg", "vel_vento_max", "raj_vento_max", "umidade_max", "temp_in_max", "temp_max", "raw_barom_max", "chuva_tot_max", "rad_sol_max", "barom_sl_max", "vel_vento_min", "raj_vento_min", "umidade_min", "temp_in_min", "temp_min", "raw_barom_min", "chuva_tot_min", "rad_sol_min", "barom_sl_min", "moon_phase")
filter_data <- strptime("10/11/2018", format = "%d/%m/%Y")
f1 <- function(x){
if(!is.na(str_extract(x, regex.inversor.path))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = regex.inversor.file)
d <- do.call("rbind", lapply(files, function(x) read.csv(x, stringsAsFactors = FALSE, header = FALSE, skip = 2, na.strings = "n/a")))
return(d)
}
return()
}
f2 <- function(x){
if(!is.na(str_extract(x, regex.estacao.path))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = regex(".csv$"))
files <- files[str_sub(files, -10, -5) >= strftime(filter_data, "%y%m%d")]
d <- do.call("rbind", lapply(files, f3))
return(d)
}
return()
}
f3 <- function(x){
d <- read.csv(x, stringsAsFactors = FALSE, header = FALSE, skip = 3, na.strings = "n/a")
d$data = str_sub(x, -10, -5)
return(d)
}
View(f1)
View(f1)
#pathrepo <- "/home/kymberlim/Documentos/ProjetoSolar/repositorio/monitoramento-ufms"
pathrepo <- "/home/Users/LSCAD/Desktop/TestesKym/MonitoramentoUFMS"
regex.inversor.path <- regex("InversorFronius")
regex.inversor.file <- regex(".*RelatÃ³rio_diÃ¡rio_.*.csv")
columns.inversor <- c("timestamp","I_CA", "I_CC", "V_CA", "V_CC", "E_CA")
regex.estacao.path <- regex("WeatherHawk$")
columns.estacao <- c("timestamp","dir_vento", "vel_vento", "raj_vento", "umidade", "temp_in", "temp", "raw_barom", "chuva_tot", "rad_sol", "p_orvalho", "barom_sl", "rad_sol_avg", "vel_vento_max", "raj_vento_max", "umidade_max", "temp_in_max", "temp_max", "raw_barom_max", "chuva_tot_max", "rad_sol_max", "barom_sl_max", "vel_vento_min", "raj_vento_min", "umidade_min", "temp_in_min", "temp_min", "raw_barom_min", "chuva_tot_min", "rad_sol_min", "barom_sl_min", "moon_phase", "data")
columns.estacao.tonumeric <- c("dir_vento", "vel_vento", "raj_vento", "umidade", "temp_in", "temp", "raw_barom", "chuva_tot", "rad_sol", "p_orvalho", "barom_sl", "rad_sol_avg", "vel_vento_max", "raj_vento_max", "umidade_max", "temp_in_max", "temp_max", "raw_barom_max", "chuva_tot_max", "rad_sol_max", "barom_sl_max", "vel_vento_min", "raj_vento_min", "umidade_min", "temp_in_min", "temp_min", "raw_barom_min", "chuva_tot_min", "rad_sol_min", "barom_sl_min", "moon_phase")
filter_data <- strptime("10/11/2018", format = "%d/%m/%Y")
f1 <- function(x){
if(!is.na(str_extract(x, regex.inversor.path))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = regex.inversor.file)
d <- do.call("rbind", lapply(files, function(x) read.csv(x, stringsAsFactors = FALSE, header = FALSE, skip = 2, na.strings = "n/a")))
return(d)
}
return()
}
f2 <- function(x){
if(!is.na(str_extract(x, regex.estacao.path))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = regex(".csv$"))
files <- files[str_sub(files, -10, -5) >= strftime(filter_data, "%y%m%d")]
d <- do.call("rbind", lapply(files, f3))
return(d)
}
return()
}
f3 <- function(x){
d <- read.csv(x, stringsAsFactors = FALSE, header = FALSE, skip = 3, na.strings = "n/a")
d$data = str_sub(x, -10, -5)
return(d)
}
#pathrepo <- "/home/kymberlim/Documentos/ProjetoSolar/repositorio/monitoramento-ufms"
#C:\SPB_Data\TestesKym\MonitoramentoUFMS
pathrepo <- "/home/SPB_Data/TestesKym/MonitoramentoUFMS"
regex.inversor.path <- regex("InversorFronius")
regex.inversor.file <- regex(".*RelatÃ³rio_diÃ¡rio_.*.csv")
columns.inversor <- c("timestamp","I_CA", "I_CC", "V_CA", "V_CC", "E_CA")
regex.estacao.path <- regex("WeatherHawk$")
columns.estacao <- c("timestamp","dir_vento", "vel_vento", "raj_vento", "umidade", "temp_in", "temp", "raw_barom", "chuva_tot", "rad_sol", "p_orvalho", "barom_sl", "rad_sol_avg", "vel_vento_max", "raj_vento_max", "umidade_max", "temp_in_max", "temp_max", "raw_barom_max", "chuva_tot_max", "rad_sol_max", "barom_sl_max", "vel_vento_min", "raj_vento_min", "umidade_min", "temp_in_min", "temp_min", "raw_barom_min", "chuva_tot_min", "rad_sol_min", "barom_sl_min", "moon_phase", "data")
columns.estacao.tonumeric <- c("dir_vento", "vel_vento", "raj_vento", "umidade", "temp_in", "temp", "raw_barom", "chuva_tot", "rad_sol", "p_orvalho", "barom_sl", "rad_sol_avg", "vel_vento_max", "raj_vento_max", "umidade_max", "temp_in_max", "temp_max", "raw_barom_max", "chuva_tot_max", "rad_sol_max", "barom_sl_max", "vel_vento_min", "raj_vento_min", "umidade_min", "temp_in_min", "temp_min", "raw_barom_min", "chuva_tot_min", "rad_sol_min", "barom_sl_min", "moon_phase")
filter_data <- strptime("10/11/2018", format = "%d/%m/%Y")
f1 <- function(x){
if(!is.na(str_extract(x, regex.inversor.path))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = regex.inversor.file)
d <- do.call("rbind", lapply(files, function(x) read.csv(x, stringsAsFactors = FALSE, header = FALSE, skip = 2, na.strings = "n/a")))
return(d)
}
return()
}
f2 <- function(x){
if(!is.na(str_extract(x, regex.estacao.path))){
files <- list.files(x, full.names = TRUE, include.dirs = TRUE, recursive = TRUE, pattern = regex(".csv$"))
files <- files[str_sub(files, -10, -5) >= strftime(filter_data, "%y%m%d")]
d <- do.call("rbind", lapply(files, f3))
return(d)
}
return()
}
f3 <- function(x){
d <- read.csv(x, stringsAsFactors = FALSE, header = FALSE, skip = 3, na.strings = "n/a")
d$data = str_sub(x, -10, -5)
return(d)
}
source('~/TestesKym/analise_dados/ufv-ufms2/codigos/f1.R')
require(ggplot2)
require(lmtest)
library("stringr")
arqEst <- "~/Projeto/Tabelas_DynamoDB/RProject/DadosEst/ambientais_ufms_OK.csv"
arqEst <- "../ambientais_ufms_OK.csv"
arqEst
arqEst <- "~/Projeto/Tabelas_DynamoDB/RProject/DadosEst/ambientais_ufms_OK.csv"
arqEst <- "~/Projeto/Tabelas_DynamoDB/RProject/DadosEst/ambientais_ufms_OK.csv"
arqEst <- "DadosEst/ambientais_ufms_OK.csv"
arqInvFronius <- "~/Projeto/monitoramento-ufms"
arqEst <- "DadosEst/ambientais_ufms_OK.csv"
arqEst <- read.csv("/DadosEst/ambientais_ufms_OK.csv")
arqEst <- read.csv("~/Projeto/Tabelas_DynamoDB/RProject/DadosEst/ambientais_ufms_OK.csv")
arqEst <- read.csv("/Projeto/Tabelas_DynamoDB/RProject/DadosEst/ambientais_ufms_OK.csv")
arqEst <- read.csv("DadosEst/ambientais_ufms_OK.csv")
arqEst <- "~/Projeto/Tabelas_DynamoDB/RProject/DadosEst/ambientais_ufms_OK.csv"
load("C:/Users/LSCAD/Documents/Projeto/Tabelas_DynamoDB/RProject/DadosEst/ambientais_ufms_OK.csv")
ambientais_ufms_OK <- read.csv("C:/Users/LSCAD/Documents/Projeto/Tabelas_DynamoDB/RProject/DadosEst/ambientais_ufms_OK.csv", header=FALSE)
View(ambientais_ufms_OK)
arqEst <- read.csv("C:/Users/LSCAD/Documents/Projeto/Tabelas_DynamoDB/RProject/DadosEst/ambientais_ufms_OK.csv",
header=FALSE)
arqEst2 <- read.csv('/DadosEst/ambientais_ufms_OK.csv')
arqEst2 <- read.csv(file = '/DadosEst/ambientais_ufms_OK.csv')
arqEst2 <- read.csv(file = 'DadosEst/ambientais_ufms_OK.csv')
dataset_save
source('D:/github/Tabelas_DynamoDB/RProject/scripts/z_quebrarDataset.R')
library(dplyr)
library(readr)
library(stringr)
library(pracma)
library(compareDF)
source('D:/github/Tabelas_DynamoDB/RProject/scripts/z_quebrarDataset.R')
View(dataset_save)
source('D:/github/Tabelas_DynamoDB/RProject/scripts/c_merge.R')
inv_caminho <- "D:/github/Tabelas_DynamoDB/csv/inversor_diario_min/hora_corrigida/"
est_caminho <- "D:/github/Tabelas_DynamoDB/csv/ambientais_diario_min/dias_completos/"
# bloco para leitura dos arquivos .csvs do inversor
pathInv <- setwd(inv_caminho)
pathInv <- setwd(inv_caminho)
namesInv <- list.files(pattern = "*.csv")
filesInv <- paste(pathInv,  "/", namesInv, sep = "")
# bloco para leitura dos arquivos .csvs da estacao
pathSta <- setwd(est_caminho)
pathSta <- setwd(est_caminho)
namesSta <- list.files(pattern = "*.csv")
filesSta <- paste(pathSta, "/", namesSta, sep = "")
source('D:/github/Tabelas_DynamoDB/RProject/scripts/c_merge.R')
os
# serao salvos
pathMerge <- setwd(merge_caminho)
pathMerge <- setwd(merge_caminho)
namesMerge <- list.files(pattern = "*.csv")
filesMerge <- paste(pathMerge,  "/", namesMerge, sep = "")
# agrupamento dos arquivos em registros de 1hr
source('D:/github/Tabelas_DynamoDB/RProject/scripts/c_merge.R')
# bloco para leitura do caminho que os arquivos combinados
# serao salvos
pathMerge <- setwd(merge_caminho)
pathMerge <- setwd(merge_caminho)
namesMerge <- list.files(pattern = "*.csv")
filesMerge <- paste(pathMerge,  "/", namesMerge, sep = "")
merge_caminho <- "D:/github/Tabelas_DynamoDB/csv/teste_lm/merge/"
pathMerge <- setwd(merge_caminho)
pathMerge <- setwd(merge_caminho)
namesMerge <- list.files(pattern = "*.csv")
filesMerge <- paste(pathMerge,  "/", namesMerge, sep = "")
source('D:/github/Tabelas_DynamoDB/RProject/scripts/c_merge.R')
fileDest
View(z_merge)
source('D:/github/Tabelas_DynamoDB/RProject/scripts/z_quebrarDataset.R')
dataset_save
View(dataset_save)
testeDiv <- "D:\\github\\Tabelas_DynamoDB\\csv\\teste_lm\\merge\\"
# bloco para leitura dos arquivos .csvs do inversor
pathDiv <- setwd(testeDiv)
pathDiv <- setwd(testeDiv)
namesDiv <- list.files(pattern = "*.csv")
filesDiv <- paste(pathDiv,  "/", namesDiv, sep = "")
dataset_aux <- setNames(data.frame(matrix(ncol = 9, nrow = 1)),
c("dia", "hora", "Vd1", "Pd", "Nloss",
"Vd2", "m", "x_gauss", "SR" ))
dataset_save <- NULL
datasetDiv <- NULL
ListaVento <- NULL
ListaVentoMedia <- NULL
ListaMassa <- NULL
ListaMassaMedia <- NULL
ListaConcentracao <- NULL
ListaConcentracaoMedia <- NULL
aux_dia <- NULL
hora_final <- NULL
UAux <- NULL
RaAux <- NULL
RbAux <- NULL
VsAux <- NULL
VdAux <- NULL
j = 1
k = 30
i = 1
dataset_temp<- readr::read_csv(namesDiv[i], col_types = cols(hora_minuto = col_character()))
dataset_temp <- na.omit(dataset_temp)#aux_dia[i] <- datasetDiv$dia_mes_ano[1]
dataset_temp
dataset_temp
dataset_save
source('D:/github/Tabelas_DynamoDB/RProject/scripts/z_quebrarDataset.R')
source('D:/github/Tabelas_DynamoDB/RProject/scripts/c_merge.R')
inv_caminho <- "D:/github/Tabelas_DynamoDB/csv/inversor_diario_min/hora_corrigida/"
est_caminho <- "D:/github/Tabelas_DynamoDB/csv/ambientais_diario_min/dias_completos/"
merge_caminho <- "D:/github/Tabelas_DynamoDB/csv/teste_lm/merge/"
group_caminho <- "D:/github/Tabelas_DynamoDB/csv/teste_lm/group/"
reglinear_caminho <- "D:/github/Tabelas_DynamoDB/csv/teste_lm/reg_linear/"
# bloco para leitura dos arquivos .csvs do inversor
pathInv <- setwd(inv_caminho)
pathInv <- setwd(inv_caminho)
namesInv <- list.files(pattern = "*.csv")
filesInv <- paste(pathInv,  "/", namesInv, sep = "")
# bloco para leitura dos arquivos .csvs da estacao
pathSta <- setwd(est_caminho)
pathSta <- setwd(est_caminho)
namesSta <- list.files(pattern = "*.csv")
filesSta <- paste(pathSta, "/", namesSta, sep = "")
# bloco para leitura do caminho que os arquivos combinados
# serao salvos
pathMerge <- setwd(merge_caminho)
pathMerge <- setwd(merge_caminho)
namesMerge <- list.files(pattern = "*.csv")
filesMerge <- paste(pathMerge,  "/", namesMerge, sep = "")
source('D:/github/Tabelas_DynamoDB/RProject/scripts/e_regressao_linear.R')
pathGroup <- group_caminho
# leitura dos arquivos pra regressao linear
pathRegLin <- setwd(pathGroup)
pathRegLin <- setwd(pathGroup)
nameRegLin <- list.files(pattern = "*.csv")
filesRegLin <- paste(pathRegLin,  "/", nameRegLin, sep = "")
source('D:/github/Tabelas_DynamoDB/RProject/scripts/c_merge.R')
z_merge
source('D:/github/Tabelas_DynamoDB/RProject/scripts/d_group_1hr.R')
salvarArq_name
y
y
source('D:/github/Tabelas_DynamoDB/RProject/scripts/d_group_1hr.R')
source('D:/github/Tabelas_DynamoDB/RProject/scripts/d_group_1hr.R')
source('D:/github/Tabelas_DynamoDB/RProject/scripts/d_group_1hr.R')
source('D:/github/Tabelas_DynamoDB/RProject/scripts/z_quebrarDataset.R')
dataset_save
source('D:/github/Tabelas_DynamoDB/RProject/scripts/z_quebrarDataset.R')
dataset_save
source('D:/github/Tabelas_DynamoDB/RProject/scripts/z_quebrarDataset.R')
dataset_save
source('D:/github/Tabelas_DynamoDB/RProject/scripts/z_quebrarDataset.R')
